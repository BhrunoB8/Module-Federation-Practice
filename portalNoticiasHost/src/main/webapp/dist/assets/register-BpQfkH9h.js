import{j as A,d as b,i as $,k as L,g as i,u as x,_ as k,c as t,o as s,a as o,b as n,t as r,w as E,l as d,v as m,n as g}from"./index-BApcu5iX.js";import{u as P,s as R,m as u,a as c,r as v,e as _,c as M}from"./index-B4iRRP_1.js";import{L as T,E as q}from"./constants-DfqkunPD.js";import"./preload-helper-CLcXU_4U.js";class D{processRegistration(a){return A.post("api/register",a)}}const H=M.regex(/^[a-zA-Z0-9!$&*+=?^_`{|}~.-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$|^[_.@A-Za-z0-9-]+$/),S=b({compatConfig:{MODE:3},name:"Register",validations(){return{registerAccount:{login:{required:v,minLength:c(1),maxLength:u(50),pattern:H},email:{required:v,minLength:c(5),maxLength:u(254),email:_},password:{required:v,minLength:c(4),maxLength:u(254)}},confirmPassword:{required:v,minLength:c(4),maxLength:u(50),sameAsPassword:R(this.registerAccount.password)}}},setup(){const e=$("loginService"),a=$("registerService",()=>new D,!0),h=$("currentLanguage",()=>L(()=>navigator.language??"pt-br"),!0),p=i(""),f=i(""),w=i(""),l=i(!1),C=i(null),y=i({login:void 0,email:void 0,password:void 0});return{openLogin:()=>{e.openLogin()},currentLanguage:h,registerService:a,error:p,errorEmailExists:f,errorUserExists:w,success:l,confirmPassword:C,registerAccount:y,v$:P(),t$:x().t}},methods:{register(){this.error=null,this.errorUserExists=null,this.errorEmailExists=null,this.registerAccount.langKey=this.currentLanguage,this.registerService.processRegistration(this.registerAccount).then(()=>{this.success=!0}).catch(e=>{this.success=null,e.response.status===400&&e.response.data.type===T?this.errorUserExists="ERROR":e.response.status===400&&e.response.data.type===q?this.errorEmailExists="ERROR":this.error="ERROR"})}}}),U={class:"row justify-content-center"},z={class:"col-md-8 toastify-container"},V=["textContent"],Z=["innerHTML"],O=["innerHTML"],j=["innerHTML"],I=["innerHTML"],Y={class:"row justify-content-center"},B={class:"col-md-8"},N={class:"form-group"},F=["textContent"],G=["placeholder"],K={key:0},J=["textContent"],Q=["textContent"],W=["textContent"],X=["textContent"],ee={class:"form-group"},te=["textContent"],se=["placeholder"],ne={key:0},oe=["textContent"],re=["textContent"],ae=["textContent"],le=["textContent"],ie={class:"form-group"},de=["textContent"],me=["placeholder"],ge={key:0},ue=["textContent"],ce=["textContent"],ve=["textContent"],$e={class:"form-group"},he=["textContent"],pe=["placeholder"],fe={key:0},we=["textContent"],Ce=["textContent"],ye=["textContent"],Ae=["textContent"],be=["disabled","textContent"],Le={class:"alert alert-warning"},xe=["textContent"],ke=["textContent"],Ee=["innerHTML"];function Pe(e,a,h,p,f,w){return s(),t("div",null,[o("div",U,[o("div",z,[o("h1",{textContent:r(e.t$("register.title")),id:"register-title","data-cy":"registerTitle"},null,8,V),e.success?(s(),t("div",{key:0,class:"alert alert-success",role:"alert",innerHTML:e.t$("register.messages.success")},null,8,Z)):n("",!0),e.error?(s(),t("div",{key:1,class:"alert alert-danger",role:"alert",innerHTML:e.t$("register.messages.error.fail")},null,8,O)):n("",!0),e.errorUserExists?(s(),t("div",{key:2,class:"alert alert-danger",role:"alert",innerHTML:e.t$("register.messages.error.userexists")},null,8,j)):n("",!0),e.errorEmailExists?(s(),t("div",{key:3,class:"alert alert-danger",role:"alert",innerHTML:e.t$("register.messages.error.emailexists")},null,8,I)):n("",!0)])]),o("div",Y,[o("div",B,[e.success?n("",!0):(s(),t("form",{key:0,id:"register-form",name:"registerForm",onSubmit:a[4]||(a[4]=E(l=>e.register(),["prevent"])),"no-validate":""},[o("div",N,[o("label",{class:"form-control-label",for:"username",textContent:r(e.t$("global.form['username.label']"))},null,8,F),d(o("input",{type:"text",class:g(["form-control",{valid:!e.v$.registerAccount.login.$invalid,invalid:e.v$.registerAccount.login.$invalid}]),"onUpdate:modelValue":a[0]||(a[0]=l=>e.v$.registerAccount.login.$model=l),id:"username",name:"login",required:"",minlength:"1",maxlength:"50",pattern:"^[a-zA-Z0-9!#$&'*+=?^_`{|}~.-]+@?[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$",placeholder:e.t$("global.form['username.placeholder']"),"data-cy":"username"},null,10,G),[[m,e.v$.registerAccount.login.$model]]),e.v$.registerAccount.login.$anyDirty&&e.v$.registerAccount.login.$invalid?(s(),t("div",K,[e.v$.registerAccount.login.required?n("",!0):(s(),t("small",{key:0,class:"form-text text-danger",textContent:r(e.t$("register.messages.validate.login.required"))},null,8,J)),e.v$.registerAccount.login.minLength?n("",!0):(s(),t("small",{key:1,class:"form-text text-danger",textContent:r(e.t$("register.messages.validate.login.minlength"))},null,8,Q)),e.v$.registerAccount.login.maxLength?n("",!0):(s(),t("small",{key:2,class:"form-text text-danger",textContent:r(e.t$("register.messages.validate.login.maxlength"))},null,8,W)),e.v$.registerAccount.login.pattern?n("",!0):(s(),t("small",{key:3,class:"form-text text-danger",textContent:r(e.t$("register.messages.validate.login.pattern"))},null,8,X))])):n("",!0)]),o("div",ee,[o("label",{class:"form-control-label",for:"email",textContent:r(e.t$("global.form['email.label']"))},null,8,te),d(o("input",{type:"email",class:g(["form-control",{valid:!e.v$.registerAccount.email.$invalid,invalid:e.v$.registerAccount.email.$invalid}]),id:"email",name:"email","onUpdate:modelValue":a[1]||(a[1]=l=>e.v$.registerAccount.email.$model=l),minlength:"5",maxlength:"254",email:"",required:"",placeholder:e.t$("global.form['email.placeholder']"),"data-cy":"email"},null,10,se),[[m,e.v$.registerAccount.email.$model]]),e.v$.registerAccount.email.$anyDirty&&e.v$.registerAccount.email.$invalid?(s(),t("div",ne,[e.v$.registerAccount.email.required?n("",!0):(s(),t("small",{key:0,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.email.required"))},null,8,oe)),e.v$.registerAccount.email.email?n("",!0):(s(),t("small",{key:1,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.email.invalid"))},null,8,re)),e.v$.registerAccount.email.minLength?n("",!0):(s(),t("small",{key:2,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.email.minlength"))},null,8,ae)),e.v$.registerAccount.email.maxLength?n("",!0):(s(),t("small",{key:3,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.email.maxlength"))},null,8,le))])):n("",!0)]),o("div",ie,[o("label",{class:"form-control-label",for:"firstPassword",textContent:r(e.t$("global.form['newpassword.label']"))},null,8,de),d(o("input",{type:"password",class:g(["form-control",{valid:!e.v$.registerAccount.password.$invalid,invalid:e.v$.registerAccount.password.$invalid}]),id:"firstPassword",name:"password","onUpdate:modelValue":a[2]||(a[2]=l=>e.v$.registerAccount.password.$model=l),minlength:"4",maxlength:"50",required:"",placeholder:e.t$("global.form['newpassword.placeholder']"),"data-cy":"firstPassword"},null,10,me),[[m,e.v$.registerAccount.password.$model]]),e.v$.registerAccount.password.$anyDirty&&e.v$.registerAccount.password.$invalid?(s(),t("div",ge,[e.v$.registerAccount.password.required?n("",!0):(s(),t("small",{key:0,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.newpassword.required"))},null,8,ue)),e.v$.registerAccount.password.minLength?n("",!0):(s(),t("small",{key:1,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.newpassword.minlength"))},null,8,ce)),e.v$.registerAccount.password.maxLength?n("",!0):(s(),t("small",{key:2,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.newpassword.maxlength"))},null,8,ve))])):n("",!0)]),o("div",$e,[o("label",{class:"form-control-label",for:"secondPassword",textContent:r(e.t$("global.form['confirmpassword.label']"))},null,8,he),d(o("input",{type:"password",class:g(["form-control",{valid:!e.v$.confirmPassword.$invalid,invalid:e.v$.confirmPassword.$invalid}]),id:"secondPassword",name:"confirmPasswordInput","onUpdate:modelValue":a[3]||(a[3]=l=>e.v$.confirmPassword.$model=l),minlength:"4",maxlength:"50",required:"",placeholder:e.t$("global.form['confirmpassword.placeholder']"),"data-cy":"secondPassword"},null,10,pe),[[m,e.v$.confirmPassword.$model]]),e.v$.confirmPassword.$dirty&&e.v$.confirmPassword.$invalid?(s(),t("div",fe,[e.v$.confirmPassword.required?n("",!0):(s(),t("small",{key:0,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.confirmpassword.required"))},null,8,we)),e.v$.confirmPassword.minLength?n("",!0):(s(),t("small",{key:1,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.confirmpassword.minlength"))},null,8,Ce)),e.v$.confirmPassword.maxLength?n("",!0):(s(),t("small",{key:2,class:"form-text text-danger",textContent:r(e.t$("global.messages.validate.confirmpassword.maxlength"))},null,8,ye)),e.v$.confirmPassword.sameAsPassword?n("",!0):(s(),t("small",{key:3,class:"form-text text-danger",textContent:r(e.t$("global.messages.error.dontmatch"))},null,8,Ae))])):n("",!0)]),o("button",{type:"submit",disabled:e.v$.$invalid,class:"btn btn-primary",textContent:r(e.t$("register.form.button")),"data-cy":"submit"},null,8,be)],32)),a[6]||(a[6]=o("p",null,null,-1)),o("div",Le,[o("span",{textContent:r(e.t$("global.messages.info.authenticated.prefix"))},null,8,xe),o("a",{class:"alert-link",onClick:a[5]||(a[5]=l=>e.openLogin()),textContent:r(e.t$("global.messages.info.authenticated.link"))},null,8,ke),o("span",{innerHTML:e.t$("global.messages.info.authenticated.suffix")},null,8,Ee)])])])])}const De=k(S,[["render",Pe]]);export{De as default};
