import{d as w,i as $,y as I,g as i,u as L,_ as j,r as c,c as d,o as u,a as t,b as g,l as A,t as s,f as r,z as p,e as U,F as D,x as P,A as _}from"./index-BApcu5iX.js";import{U as V}from"./user-management.service-lcwQ6W0j.js";import{u as B}from"./date-format-C1y0n0RX.js";import"./preload-helper-CLcXU_4U.js";const R=w({compatConfig:{MODE:3},name:"JhiUserManagementComponent",mounted(){this.loadAll()},setup(){const e=$("alertService",()=>I(),!0),{formatDateShort:o}=B(),y=$("userManagementService",()=>new V,!0),k=$("currentUsername"),M=i(""),O=i(""),m=i(20),h=i(1),l=i(1),v=i("id"),C=i(!1),f=i(!1),b=i(null),n=i([]),a=i(0),S=i(null);return{formatDate:o,userManagementService:y,alertService:e,error:M,success:O,itemsPerPage:m,page:h,previousPage:l,propOrder:v,reverse:C,isLoading:f,removeId:b,users:n,username:k,totalItems:a,queryCount:S,t$:L().t}},methods:{setActive(e,o){e.activated=o,this.userManagementService.update(e).then(()=>{this.error=null,this.success="OK",this.loadAll()}).catch(()=>{this.success=null,this.error="ERROR",e.activated=!1})},loadAll(){this.isLoading=!0,this.userManagementService.retrieve({sort:this.sort(),page:this.page-1,size:this.itemsPerPage}).then(e=>{this.isLoading=!1,this.users=e.data,this.totalItems=Number(e.headers["x-total-count"]),this.queryCount=this.totalItems}).catch(()=>{this.isLoading=!1})},handleSyncList(){this.loadAll()},sort(){const e=[`${this.propOrder},${this.reverse?"desc":"asc"}`];return this.propOrder!=="id"&&e.push("id"),e},loadPage(e){e!==this.previousPage&&(this.previousPage=e,this.transition())},transition(){this.loadAll()},changeOrder(e){this.propOrder=e,this.reverse=!this.reverse,this.transition()},deleteUser(){this.userManagementService.remove(this.removeId).then(e=>{this.alertService.showInfo(this.t$(e.headers["x-portalnoticiashostapp-alert"].toString(),{param:decodeURIComponent(e.headers["x-portalnoticiashostapp-params"].replace(/\+/g," "))}),{variant:"danger"}),this.removeId=null,this.loadAll(),this.closeDialog()}).catch(e=>{this.alertService.showHttpError(e.response)})},prepareRemove(e){this.removeId=e.login,this.$refs.removeUser&&this.$refs.removeUser.show()},closeDialog(){this.$refs.removeUser&&this.$refs.removeUser.hide()}}}),E=["textContent"],J={class:"d-flex justify-content-end"},K=["disabled"],N=["textContent"],q=["onClick"],z=["textContent"],F={key:0,class:"table-responsive"},H={class:"table table-striped","aria-describedby":"Users"},T=["textContent"],G=["textContent"],Q=["textContent"],W=["textContent"],X={scope:"col"},Y=["textContent"],Z=["textContent"],x=["textContent"],ee=["textContent"],te={key:0},ne=["id"],oe={class:"jhi-user-email"},se=["onClick","textContent"],re=["onClick","disabled","textContent"],ie={class:"badge badge-info"},ae={class:"text-right"},le={class:"btn-group"},de=["onClick"],ue=["textContent"],me=["onClick"],ce=["textContent"],pe=["textContent"],he={class:"modal-body"},ge=["textContent"],ve=["textContent"],Ce=["textContent"],fe={class:"row justify-content-center"},be={class:"row justify-content-center"};function $e(e,o,y,k,M,O){const m=c("font-awesome-icon"),h=c("router-link"),l=c("jhi-sort-indicator"),v=c("b-button"),C=c("b-modal"),f=c("jhi-item-count"),b=c("b-pagination");return u(),d("div",null,[t("h2",null,[t("span",{id:"user-management-page-heading",textContent:s(e.t$("userManagement.home.title")),"data-cy":"userManagementPageHeading"},null,8,E),t("div",J,[t("button",{class:"btn btn-info mr-2",onClick:o[0]||(o[0]=(...n)=>e.handleSyncList&&e.handleSyncList(...n)),disabled:e.isLoading},[r(m,{icon:"sync",spin:e.isLoading},null,8,["spin"]),t("span",{textContent:s(e.t$("userManagement.home.refreshListLabel"))},null,8,N)],8,K),r(h,{custom:"",to:{name:"JhiUserCreate"}},{default:p(({navigate:n})=>[t("button",{onClick:n,class:"btn btn-primary jh-create-entity"},[r(m,{icon:"plus"}),o[12]||(o[12]=U()),t("span",{textContent:s(e.t$("userManagement.home.createLabel"))},null,8,z)],8,q)]),_:1})])]),e.users?(u(),d("div",F,[t("table",H,[t("thead",null,[t("tr",null,[t("th",{scope:"col",onClick:o[1]||(o[1]=n=>e.changeOrder("id"))},[t("span",{textContent:s(e.t$("global.field.id"))},null,8,T),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"id"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[2]||(o[2]=n=>e.changeOrder("login"))},[t("span",{textContent:s(e.t$("userManagement.login"))},null,8,G),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"login"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[3]||(o[3]=n=>e.changeOrder("email"))},[t("span",{textContent:s(e.t$("userManagement.email"))},null,8,Q),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"email"},null,8,["current-order","reverse"])]),o[13]||(o[13]=t("th",{scope:"col"},null,-1)),t("th",{scope:"col",onClick:o[4]||(o[4]=n=>e.changeOrder("langKey"))},[t("span",{textContent:s(e.t$("userManagement.langKey"))},null,8,W),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"langKey"},null,8,["current-order","reverse"])]),t("th",X,[t("span",{textContent:s(e.t$("userManagement.profiles"))},null,8,Y)]),t("th",{scope:"col",onClick:o[5]||(o[5]=n=>e.changeOrder("createdDate"))},[t("span",{textContent:s(e.t$("userManagement.createdDate"))},null,8,Z),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"createdDate"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[6]||(o[6]=n=>e.changeOrder("lastModifiedBy"))},[t("span",{textContent:s(e.t$("userManagement.lastModifiedBy"))},null,8,x),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"lastModifiedBy"},null,8,["current-order","reverse"])]),t("th",{scope:"col",id:"modified-date-sort",onClick:o[7]||(o[7]=n=>e.changeOrder("lastModifiedDate"))},[t("span",{textContent:s(e.t$("userManagement.lastModifiedDate"))},null,8,ee),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"lastModifiedDate"},null,8,["current-order","reverse"])]),o[14]||(o[14]=t("th",{scope:"col"},null,-1))])]),e.users?(u(),d("tbody",te,[(u(!0),d(D,null,P(e.users,n=>(u(),d("tr",{key:n.id,id:n.login},[t("td",null,[r(h,{to:{name:"JhiUserView",params:{userId:n.login}}},{default:p(()=>[U(s(n.id),1)]),_:2},1032,["to"])]),t("td",null,s(n.login),1),t("td",oe,s(n.email),1),t("td",null,[n.activated?g("",!0):(u(),d("button",{key:0,class:"btn btn-danger btn-sm deactivated",onClick:a=>e.setActive(n,!0),textContent:s(e.t$("userManagement.deactivated"))},null,8,se)),n.activated?(u(),d("button",{key:1,class:"btn btn-success btn-sm",onClick:a=>e.setActive(n,!1),disabled:e.username===n.login,textContent:s(e.t$("userManagement.activated"))},null,8,re)):g("",!0)]),t("td",null,s(n.langKey),1),t("td",null,[(u(!0),d(D,null,P(n.authorities,a=>(u(),d("div",{key:a},[t("span",ie,s(a),1)]))),128))]),t("td",null,s(e.formatDate(n.createdDate)),1),t("td",null,s(n.lastModifiedBy),1),t("td",null,s(e.formatDate(n.lastModifiedDate)),1),t("td",ae,[t("div",le,[r(h,{to:{name:"JhiUserView",params:{userId:n.login}},custom:""},{default:p(({navigate:a})=>[t("button",{onClick:a,class:"btn btn-info btn-sm details"},[r(m,{icon:"eye"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.view"))},null,8,ue)],8,de)]),_:2},1032,["to"]),r(h,{to:{name:"JhiUserEdit",params:{userId:n.login}},custom:""},{default:p(({navigate:a})=>[t("button",{onClick:a,class:"btn btn-primary btn-sm edit"},[r(m,{icon:"pencil-alt"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.edit"))},null,8,ce)],8,me)]),_:2},1032,["to"]),r(v,{onClick:a=>e.prepareRemove(n),variant:"danger",class:"btn btn-sm delete",disabled:e.username===n.login},{default:p(()=>[r(m,{icon:"times"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.delete"))},null,8,pe)]),_:2},1032,["onClick","disabled"])])])],8,ne))),128))])):g("",!0)]),r(C,{ref:"removeUser",id:"removeUser",title:e.t$("entity.delete.title"),onOk:o[10]||(o[10]=n=>e.deleteUser())},{"modal-footer":p(()=>[t("div",null,[t("button",{type:"button",class:"btn btn-secondary",textContent:s(e.t$("entity.action.cancel")),onClick:o[8]||(o[8]=n=>e.closeDialog())},null,8,ve),t("button",{type:"button",class:"btn btn-primary",id:"confirm-delete-user",textContent:s(e.t$("entity.action.delete")),onClick:o[9]||(o[9]=n=>e.deleteUser())},null,8,Ce)])]),default:p(()=>[t("div",he,[t("p",{id:"jhi-delete-user-heading",textContent:s(e.t$("userManagement.delete.question",{login:e.removeId}))},null,8,ge)])]),_:1},8,["title"])])):g("",!0),A(t("div",null,[t("div",fe,[r(f,{page:e.page,total:e.queryCount,itemsPerPage:e.itemsPerPage},null,8,["page","total","itemsPerPage"])]),t("div",be,[r(b,{size:"md","total-rows":e.totalItems,modelValue:e.page,"onUpdate:modelValue":o[11]||(o[11]=n=>e.page=n),"per-page":e.itemsPerPage,change:e.loadPage(e.page)},null,8,["total-rows","modelValue","per-page","change"])])],512),[[_,e.users&&e.users.length>0]])])}const Ue=j(R,[["render",$e]]);export{Ue as default};
