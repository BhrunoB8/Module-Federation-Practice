import{j as v,d as m,i as C,g as p,k as y,u as k,_ as x,c as a,o as l,a as e,b as O,t as c,e as P,l as w,v as $,F as f,x as g}from"./index-BApcu5iX.js";import{o as j}from"./arrays-BBQyuUUU.js";import"./preload-helper-CLcXU_4U.js";class S{loadConfiguration(){return new Promise(o=>{v.get("management/configprops").then(i=>{const u=[],d=this.getConfigPropertiesObjects(i.data);for(const s in d)Object.hasOwn(d,s)&&u.push(d[s]);u.sort((s,n)=>{const r=s.prefix<n.prefix?-1:1;return s.prefix===n.prefix?0:r}),o(u)})})}loadEnvConfiguration(){return new Promise(o=>{v.get("management/env").then(i=>{const u={},d=i.data.propertySources;for(const s of d){const n=s.name,r=s.properties,h=[];for(const b in r)Object.hasOwn(r,b)&&h.push({key:b,val:r[b].value});u[n]=h}o(u)})})}getConfigPropertiesObjects(o){if(o.contexts!==void 0){for(const i in o.contexts)if(!i.startsWith("bootstrap"))return o.contexts[i].beans}return o.contexts.portalNoticiasHost.beans}}const _=m({compatConfig:{MODE:3},name:"JhiConfiguration",setup(){const t=C("configurationService",()=>new S,!0),o=p("prefix"),i=p(!1),u=p({}),d=p([]),s=p([]),n=p(""),r=y(()=>j(d.value,{filterByTerm:n.value,orderByProp:o.value,reverse:i.value}));return{configurationService:t,orderProp:o,reverse:i,allConfiguration:u,configuration:d,configKeys:s,filtered:n,filteredConfiguration:r,t$:k().t}},mounted(){this.init()},methods:{init(){this.configurationService.loadConfiguration().then(t=>{this.configuration=t;for(const o of this.configuration)o.properties!==void 0&&this.configKeys.push(Object.keys(o.properties))}),this.configurationService.loadEnvConfiguration().then(t=>{this.allConfiguration=t})},changeOrder(t){this.orderProp=t,this.reverse=!this.reverse},keys(t){return t===void 0?[]:Object.keys(t)}}}),B=["textContent"],V={key:0},D=["textContent"],E={class:"table table-striped table-bordered table-responsive d-table","aria-describedby":"Configuration"},N=["textContent"],F=["textContent"],T={class:"col-md-4"},H={class:"col-md-8"},K={class:"float-right badge-secondary break"},M={class:"table table-sm table-striped table-bordered table-responsive d-table","aria-describedby":"Properties"},I={class:"break"},J={class:"break"},L={class:"float-right badge-secondary break"};function U(t,o,i,u,d,s){return l(),a("div",null,[e("h2",{id:"configuration-page-heading",textContent:c(t.t$("configuration.title")),"data-cy":"configurationPageHeading"},null,8,B),t.allConfiguration&&t.configuration?(l(),a("div",V,[e("span",{textContent:c(t.t$("configuration.filter"))},null,8,D),o[4]||(o[4]=P()),w(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>t.filtered=n),class:"form-control"},null,512),[[$,t.filtered]]),o[5]||(o[5]=e("h3",null,"Spring configuration",-1)),e("table",E,[e("thead",null,[e("tr",null,[e("th",{class:"w-40",onClick:o[1]||(o[1]=n=>t.changeOrder("prefix")),scope:"col"},[e("span",{textContent:c(t.t$("configuration.table.prefix"))},null,8,N)]),e("th",{class:"w-60",onClick:o[2]||(o[2]=n=>t.changeOrder("properties")),scope:"col"},[e("span",{textContent:c(t.t$("configuration.table.properties"))},null,8,F)])])]),e("tbody",null,[(l(!0),a(f,null,g(t.filteredConfiguration,n=>(l(),a("tr",{key:n.prefix},[e("td",null,[e("span",null,c(n.prefix),1)]),e("td",null,[(l(!0),a(f,null,g(t.keys(n.properties),r=>(l(),a("div",{class:"row",key:r},[e("div",T,c(r),1),e("div",H,[e("span",K,c(n.properties[r]),1)])]))),128))])]))),128))])]),(l(!0),a(f,null,g(t.keys(t.allConfiguration),n=>(l(),a("div",{key:n},[e("h4",null,[e("span",null,c(n),1)]),e("table",M,[o[3]||(o[3]=e("thead",null,[e("tr",null,[e("th",{class:"w-40",scope:"col"},"Property"),e("th",{class:"w-60",scope:"col"},"Value")])],-1)),e("tbody",null,[(l(!0),a(f,null,g(t.allConfiguration[n],r=>(l(),a("tr",{key:r.key},[e("td",I,c(r.key),1),e("td",J,[e("span",L,c(r.val),1)])]))),128))])])]))),128))])):O("",!0)])}const A=x(_,[["render",U]]);export{A as default};
