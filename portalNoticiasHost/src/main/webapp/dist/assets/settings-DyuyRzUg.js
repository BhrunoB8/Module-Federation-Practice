import{d as C,j as N,p as b,g as m,k as A,i as L,u as k,q as E,_ as x,c as e,o as s,a as l,b as n,w as q,l as r,t as a,v as u,n as d,s as M,F as D,x as T}from"./index-BApcu5iX.js";import{m as g,a as c,e as K,r as v,u as R}from"./index-B4iRRP_1.js";import{E as V}from"./constants-DfqkunPD.js";import"./preload-helper-CLcXU_4U.js";const H={settingsAccount:{firstName:{required:v,minLength:c(1),maxLength:g(50)},lastName:{required:v,minLength:c(1),maxLength:g(50)},email:{required:v,email:K,minLength:c(5),maxLength:g(254)}}},S=C({compatConfig:{MODE:3},name:"Settings",validations:H,setup(){const t=b(),o=m(null),$=m(null),h=m(null),f=A(()=>t.account),p=L("currentUsername",()=>A(()=>t.account?.login),!0);return{success:o,error:$,errorEmailExists:h,settingsAccount:f,username:p,v$:R(),languages:E(),t$:k().t}},methods:{save(){return this.error=null,this.errorEmailExists=null,N.post("api/account",this.settingsAccount).then(()=>{this.error=null,this.success="OK",this.errorEmailExists=null}).catch(t=>{this.success=null,this.error="ERROR",t.response.status===400&&t.response.data.type===V&&(this.errorEmailExists="ERROR",this.error=null)})}}}),U={class:"row justify-content-center"},O={class:"col-md-8 toastify-container"},_={key:0,id:"settings-title"},j=["innerHTML"],w=["innerHTML"],B=["innerHTML"],F={class:"form-group"},I=["textContent"],Y=["placeholder"],z={key:0},P=["textContent"],G=["textContent"],J=["textContent"],Q={class:"form-group"},W=["textContent"],X=["placeholder"],Z={key:0},tt=["textContent"],et=["textContent"],st=["textContent"],nt={class:"form-group"},at=["textContent"],lt=["placeholder"],ot={key:0},it=["textContent"],rt=["textContent"],mt=["textContent"],ut=["textContent"],dt={key:0,class:"form-group"},gt=["textContent"],ct=["value"],vt=["disabled","textContent"];function $t(t,o,$,h,f,p){return s(),e("div",null,[l("div",U,[l("div",O,[t.username?(s(),e("h2",_,[l("span",{innerHTML:t.t$("settings.title",{username:t.username})},null,8,j)])):n("",!0),t.success?(s(),e("div",{key:1,class:"alert alert-success",role:"alert",innerHTML:t.t$("settings.messages.success")},null,8,w)):n("",!0),t.errorEmailExists?(s(),e("div",{key:2,class:"alert alert-danger",role:"alert",innerHTML:t.t$("register.messages.error.emailexists")},null,8,B)):n("",!0),t.settingsAccount?(s(),e("form",{key:3,name:"form",id:"settings-form",onSubmit:o[4]||(o[4]=q(i=>t.save(),["prevent"])),novalidate:""},[l("div",F,[l("label",{class:"form-control-label",for:"firstName",textContent:a(t.t$("settings.form.firstname"))},null,8,I),r(l("input",{type:"text",class:d(["form-control",{valid:!t.v$.settingsAccount.firstName.$invalid,invalid:t.v$.settingsAccount.firstName.$invalid}]),id:"firstName",name:"firstName",placeholder:t.t$("settings.form['firstname.placeholder']"),"onUpdate:modelValue":o[0]||(o[0]=i=>t.v$.settingsAccount.firstName.$model=i),minlength:"1",maxlength:"50",required:"","data-cy":"firstname"},null,10,Y),[[u,t.v$.settingsAccount.firstName.$model]]),t.v$.settingsAccount.firstName.$anyDirty&&t.v$.settingsAccount.firstName.$invalid?(s(),e("div",z,[t.v$.settingsAccount.firstName.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.required"))},null,8,P)),t.v$.settingsAccount.firstName.minLength?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.minlength"))},null,8,G)),t.v$.settingsAccount.firstName.maxLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.maxlength"))},null,8,J))])):n("",!0)]),l("div",Q,[l("label",{class:"form-control-label",for:"lastName",textContent:a(t.t$("settings.form.lastname"))},null,8,W),r(l("input",{type:"text",class:d(["form-control",{valid:!t.v$.settingsAccount.lastName.$invalid,invalid:t.v$.settingsAccount.lastName.$invalid}]),id:"lastName",name:"lastName",placeholder:t.t$("settings.form['lastname.placeholder']"),"onUpdate:modelValue":o[1]||(o[1]=i=>t.v$.settingsAccount.lastName.$model=i),minlength:"1",maxlength:"50",required:"","data-cy":"lastname"},null,10,X),[[u,t.v$.settingsAccount.lastName.$model]]),t.v$.settingsAccount.lastName.$anyDirty&&t.v$.settingsAccount.lastName.$invalid?(s(),e("div",Z,[t.v$.settingsAccount.lastName.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.required"))},null,8,tt)),t.v$.settingsAccount.lastName.minLength?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.minlength"))},null,8,et)),t.v$.settingsAccount.lastName.maxLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.maxlength"))},null,8,st))])):n("",!0)]),l("div",nt,[l("label",{class:"form-control-label",for:"email",textContent:a(t.t$("global.form['email.label']"))},null,8,at),r(l("input",{type:"email",class:d(["form-control",{valid:!t.v$.settingsAccount.email.$invalid,invalid:t.v$.settingsAccount.email.$invalid}]),id:"email",name:"email",placeholder:t.t$("global.form['email.placeholder']"),"onUpdate:modelValue":o[2]||(o[2]=i=>t.v$.settingsAccount.email.$model=i),minlength:"5",maxlength:"254",email:"",required:"","data-cy":"email"},null,10,lt),[[u,t.v$.settingsAccount.email.$model]]),t.v$.settingsAccount.email.$anyDirty&&t.v$.settingsAccount.email.$invalid?(s(),e("div",ot,[t.v$.settingsAccount.email.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.required"))},null,8,it)),t.v$.settingsAccount.email.email?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.invalid"))},null,8,rt)),t.v$.settingsAccount.email.minLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.minlength"))},null,8,mt)),t.v$.settingsAccount.email.maxLength?n("",!0):(s(),e("small",{key:3,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.maxlength"))},null,8,ut))])):n("",!0)]),t.languages&&Object.keys(t.languages).length>1?(s(),e("div",dt,[l("label",{for:"langKey",textContent:a(t.t$("settings.form.language"))},null,8,gt),r(l("select",{class:"form-control",id:"langKey",name:"langKey","onUpdate:modelValue":o[3]||(o[3]=i=>t.settingsAccount.langKey=i),"data-cy":"langKey"},[(s(!0),e(D,null,T(t.languages,(i,y)=>(s(),e("option",{value:y,key:`lang-${y}`},a(i.name),9,ct))),128))],512),[[M,t.settingsAccount.langKey]])])):n("",!0),l("button",{type:"submit",disabled:t.v$.settingsAccount.$invalid,class:"btn btn-primary",textContent:a(t.t$("settings.form.button")),"data-cy":"submit"},null,8,vt)],32)):n("",!0)])])])}const At=x(S,[["render",$t]]);export{At as default};
